(this["webpackJsonpmern-client"]=this["webpackJsonpmern-client"]||[]).push([[0],{63:function(e,t,a){e.exports=a(81)},68:function(e,t,a){},81:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(32),o=a.n(l),c=(a(68),a(17)),i=a(7),s=a(13),u=a(62),m=(a(42),a(52)),d=a(53),p=function(){return r.a.createElement(m.a,{className:"Jumbotron",fluid:!0},r.a.createElement(d.a,null,r.a.createElement("h1",{className:"title-home"},r.a.createElement("span",{role:"img","aria-label":"shopping bag"},"\ud83d\udcdd"),"Words Projects"),r.a.createElement("br",null),r.a.createElement("h2",{className:"title"},"Welcome"),r.a.createElement("br",null),r.a.createElement("p",{className:"paragraph"},r.a.createElement("em",null,"This is a modified jumbotron that occupies the entire horizontal space of its parent."))))},v=a(27),f=a(23),b=a(14),E=a.n(b),h=a(26),g=a(21),j=a(20),w=a(24),N=a(16),y=a.n(N);function x(){var e=Object(w.a)(["\n  mutation addBulkProject($project: [projectInput]) {\n    addBulkProject(project: $project) {\n      projects {\n        title\n        ideasText\n        date\n      }\n    }\n  }\n"]);return x=function(){return e},e}function O(){var e=Object(w.a)(["\n  mutation editProject($project: projectInput) {\n    editProject(project: $project) {\n      _id\n      projects {\n        title\n        ideasText\n        date\n      }\n    }\n  }\n"]);return O=function(){return e},e}function k(){var e=Object(w.a)(["\n  mutation deleteProject($_id: ID) {\n    deleteProject(_id: $_id) {\n      _id\n    }\n  }\n"]);return k=function(){return e},e}function S(){var e=Object(w.a)(["\n  mutation addProject($project: projectInput) {\n    addProject(project: $project) {\n      projects {\n        _id\n        title\n        ideasText\n        date\n      }\n    }\n  }\n"]);return S=function(){return e},e}function P(){var e=Object(w.a)(["\n  mutation addUser(\n    $firstName: String!\n    $lastName: String!\n    $email: String!\n    $password: String!\n  ) {\n    addUser(\n      firstName: $firstName\n      lastName: $lastName\n      email: $email\n      password: $password\n    ) {\n      token\n      user {\n        firstName\n        _id\n        lastName\n        email\n        projects {\n          title\n        }\n        projectCount\n      }\n    }\n  }\n"]);return P=function(){return e},e}function T(){var e=Object(w.a)(["\n  mutation login($email: String!, $password: String!) {\n    login(email: $email, password: $password) {\n      token\n      user {\n        _id\n        firstName\n        lastName\n        email\n        projects {\n          title\n        }\n        projectCount\n      }\n    }\n  }\n"]);return T=function(){return e},e}var $=y()(T()),C=y()(P()),_=y()(S()),A=y()(k()),D=(y()(O()),y()(x()),a(54)),F=a(55),I=a(44),L=a.n(I),W=new(function(){function e(){Object(D.a)(this,e)}return Object(F.a)(e,[{key:"getProfile",value:function(){return L()(this.getToken())}},{key:"loggedIn",value:function(){var e=this.getToken();return!!e&&!this.isTokenExpired(e)}},{key:"isTokenExpired",value:function(e){try{return L()(e).exp<Date.now()/1e3}catch(t){return!1}}},{key:"getToken",value:function(){return localStorage.getItem("id_token")}},{key:"login",value:function(e){localStorage.setItem("id_token",e),window.location.assign("/")}},{key:"logout",value:function(){localStorage.removeItem("id_token"),window.location.assign("/")}}]),e}());var B=function(e){var t=Object(n.useState)({email:"",password:""}),a=Object(g.a)(t,2),l=a[0],o=a[1],i=Object(j.a)($),s=Object(g.a)(i,2),u=s[0],m=s[1].error,d=function(){var e=Object(h.a)(E.a.mark((function e(t){var a,n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,u({variables:{email:l.email,password:l.password}});case 4:a=e.sent,n=a.data.login.token,W.login(n),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),p=function(e){var t=e.target,a=t.name,n=t.value;o(Object(f.a)(Object(f.a)({},l),{},Object(v.a)({},a,n)))};return r.a.createElement("div",{className:"container my-1"},r.a.createElement(c.b,{to:"/signup"},"\u2190 Go to Signup"),r.a.createElement("h2",null,"Login"),r.a.createElement("form",{onSubmit:d},r.a.createElement("div",{className:"flex-row space-between my-2"},r.a.createElement("label",{htmlFor:"email"},"Email address:"),r.a.createElement("input",{placeholder:"youremail@test.com",name:"email",type:"email",id:"email",onChange:p})),r.a.createElement("div",{className:"flex-row space-between my-2"},r.a.createElement("label",{htmlFor:"pwd"},"Password:"),r.a.createElement("input",{placeholder:"******",name:"password",type:"password",id:"pwd",onChange:p})),m?r.a.createElement("div",null,r.a.createElement("p",{className:"error-text"},"The provided credentials are incorrect")):null,r.a.createElement("div",{className:"flex-row flex-end"},r.a.createElement("button",{className:"btn2",type:"submit"},"Submit"))))};var q=function(e){var t=Object(n.useState)({email:"",password:""}),a=Object(g.a)(t,2),l=a[0],o=a[1],i=Object(j.a)(C),s=Object(g.a)(i,1)[0],u=function(){var e=Object(h.a)(E.a.mark((function e(t){var a,n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,s({variables:{email:l.email,password:l.password,firstName:l.firstName,lastName:l.lastName}});case 3:a=e.sent,n=a.data.addUser.token,W.login(n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(e){var t=e.target,a=t.name,n=t.value;o(Object(f.a)(Object(f.a)({},l),{},Object(v.a)({},a,n)))};return r.a.createElement("div",{className:"container my-1"},r.a.createElement(c.b,{to:"/login"},"\u2190 Go to Login"),r.a.createElement("h2",null,"Signup"),r.a.createElement("form",{onSubmit:u},r.a.createElement("div",{className:"flex-row space-between my-2"},r.a.createElement("label",{htmlFor:"firstName"},"First Name:"),r.a.createElement("input",{placeholder:"First",name:"firstName",type:"firstName",id:"firstName",onChange:m})),r.a.createElement("div",{className:"flex-row space-between my-2"},r.a.createElement("label",{htmlFor:"lastName"},"Last Name:"),r.a.createElement("input",{placeholder:"Last",name:"lastName",type:"lastName",id:"lastName",onChange:m})),r.a.createElement("div",{className:"flex-row space-between my-2"},r.a.createElement("label",{htmlFor:"email"},"Email:"),r.a.createElement("input",{placeholder:"youremail@test.com",name:"email",type:"email",id:"email",onChange:m})),r.a.createElement("div",{className:"flex-row space-between my-2"},r.a.createElement("label",{htmlFor:"pwd"},"Password:"),r.a.createElement("input",{placeholder:"******",name:"password",type:"password",id:"pwd",onChange:m})),r.a.createElement("div",{className:"flex-row flex-end"},r.a.createElement("button",{className:"btn2",type:"submit"},"Submit"))))};var z=function(){return r.a.createElement("header",{className:"flex-row px-1"},r.a.createElement("h1",null,r.a.createElement(c.b,{to:"/"},r.a.createElement("span",{role:"img","aria-label":"shopping bag"},"\ud83d\udcdd"),"Words Projects")),r.a.createElement("nav",null,W.loggedIn()?r.a.createElement("ul",{className:"flex-row"},r.a.createElement("li",{className:"mx-1"},r.a.createElement(c.b,{to:"/AllProjects"},"All Projects")),r.a.createElement("li",{className:"mx-1"},r.a.createElement(c.b,{to:"/MyProject"},"My Projects")),r.a.createElement("li",{className:"mx-1"},r.a.createElement(c.b,{to:"/Dashboard"},"Dashboard")),r.a.createElement("li",{className:"mx-1"},r.a.createElement("a",{href:"/",onClick:function(){return W.logout()}},"Logout"))):r.a.createElement("ul",{className:"flex-row2"},r.a.createElement("li",{className:"mx-1"},r.a.createElement(c.b,{to:"/signup"},"Signup")),r.a.createElement("li",{className:"mx-12"},r.a.createElement(c.b,{to:"/login"},"Login")))))},M=a(47);function V(){var e=Object(w.a)(["\n{\n  users{  \n    _id\n    firstName\n    lastName   \n    projects{\n      _id\n      title\n      ideasText\n      date      \n    }\n     projectCount     \n  }\n}\n"]);return V=function(){return e},e}function H(){var e=Object(w.a)(["\n{\nme{  \n  _id\n  firstName\n  lastName   \n  projects{\n    _id\n    title\n    ideasText\n    date      \n  }\n   projectCount     \n }\n}\n"]);return H=function(){return e},e}function K(){var e=Object(w.a)(["\n  query ($firstName: String!) {\n    user(firstName: $firstName) {\n          firstName\n          lastName\t\t\t\t       \n          projects {\n             title\n             ideasText\n             date\n          }\n      projectCount\n    }\n  }\n"]);return K=function(){return e},e}y()(K());var U=y()(H()),Q=y()(V());function R(e,t,a){return new Promise((function(n,r){var l,o,c,i=window.indexedDB.open("WordsPorjectsDB",1);i.onupgradeneeded=function(e){i.result.createObjectStore("projects",{keyPath:"_id"})},i.onerror=function(e){console.log("There was an error")},i.onsuccess=function(r){switch(l=i.result,o=l.transaction(e,"readwrite"),c=o.objectStore(e),l.onerror=function(e){console.log("error",e)},t){case"put":c.put(a),n(a);break;case"get":var s=c.getAll();s.onsuccess=function(){n(s.result)};break;case"delete":c.delete(a._id);break;default:console.log("No valid method")}o.oncomplete=function(){l.close()}}}))}var J=function(){var e=Object(n.useState)({title:"",ideasText:""}),t=Object(g.a)(e,2),a=t[0],l=t[1],o=a.title,c=a.ideasText,i=Object(n.useState)(""),s=Object(g.a)(i,2),u=s[0],m=s[1],d=Object(j.a)(_,{update:function(e,t){var a=t.data.addProject;try{var n=e.readQuery({query:U}).proj;e.writeQuery({query:U,data:{proj:[a].concat(Object(M.a)(n))}})}catch(l){console.error(l)}var r=e.readQuery({query:U}).me;e.writeQuery({query:U,data:{me:Object(f.a)(Object(f.a)({},r),{},{projects:[].concat(Object(M.a)(r.projects),[a])})}})}}),p=Object(g.a)(d,2),b=p[0];function w(e){e.target.value.length?m(""):m("".concat(e.target.name," is required.")),u||l(Object(f.a)(Object(f.a)({},a),{},Object(v.a)({},e.target.name,e.target.value)))}p[1].error;var N=function(){var e=Object(h.a)(E.a.mark((function e(t){var n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),console.log("projects data",a),e.prev=2,e.next=5,b({variables:{project:a}});case 5:n=e.sent,n.data.addProject.projects.forEach((function(e){R("projects","put",e)})),l({title:"",ideasText:""}),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(2),window.saveRecord(a),console.error(e.t0),R("projects","put",a);case 16:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("section",null,r.a.createElement("h1",{className:"title","data-testid":"h1tag"},"Project Detail"),r.a.createElement("form",{className:"card-d",id:"contact-form",onSubmit:N},r.a.createElement("div",null,r.a.createElement("label",{className:"LabelDasgboard",htmlFor:"name"},"Project Name:"),r.a.createElement("input",{type:"text",name:"title",value:o,onChange:w})),r.a.createElement("div",null,r.a.createElement("label",{className:"LabelDasgboard",htmlFor:"textArea"},"Text Area:"),r.a.createElement("textarea",{name:"ideasText",rows:"5",value:c,onChange:w})),u&&r.a.createElement("div",null,r.a.createElement("p",{className:"error-text"},u)),r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("button",{claseName:"btn","data-testid":"btntag",type:"submit"},"Submit"))))},G=a(29),X=a(30),Y=a(33);var Z=function(){var e=Object(j.b)(U),t=e.loading,a=e.data,l=Object(j.a)(A),o=Object(g.a)(l,1)[0],c=(null===a||void 0===a?void 0:a.me)||{},i=function(){var e=Object(h.a)(E.a.mark((function e(t){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("ID to delete",t),e.prev=1,e.next=4,o({variables:{_id:t}});case 4:window.location.reload(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}();return console.log("Query user",c.projects),t||console.log(c),Object(n.useEffect)((function(){var e;function t(){return(t=Object(h.a)(E.a.mark((function e(){var t;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R("projects","get");case 2:t=e.sent,c.projects=t;case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(null===c||void 0===c||null===(e=c.projects)||void 0===e?void 0:e.length)||function(){t.apply(this,arguments)}()}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement("h5",null,null===c||void 0===c?void 0:c.firstName," ",null===c||void 0===c?void 0:c.lastName," have ",null===c||void 0===c?void 0:c.projectCount," ","project(s)"),t?"":null===c||void 0===c?void 0:c.projects.map((function(e){return r.a.createElement("div",{className:"Project"},r.a.createElement(G.a,{key:e._id,defaultActiveKey:"0"},r.a.createElement(X.a,null,r.a.createElement(G.a.Toggle,{as:X.a.Header,eventKey:"0"},r.a.createElement("h3",null,e.title,r.a.createElement("br",null),r.a.createElement("h6",null,e.date))),r.a.createElement(G.a.Collapse,{eventKey:"0"},r.a.createElement(X.a.Body,null,r.a.createElement("p",null,e.ideasText),r.a.createElement("br",null),r.a.createElement(Y.a,{variant:"outline-success",onClick:function(){return i(e._id)}},r.a.createElement("svg",{width:"1em",height:"1em",viewBox:"0 0 16 16",class:"bi bi-trash",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("path",{d:"M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z"}),r.a.createElement("path",{"fill-rule":"evenodd",d:"M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4L4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z"})),"Delete"))))))})))},ee=a(40),te=a(61);function ae(){var e=Object(j.b)(Q),t=e.loading,a=e.data,n=(null===a||void 0===a?void 0:a.users)||{};return t||(console.log("All project2",n),console.log("All project",n[0].projects[0].title)),t?"":(n||[]).map((function(e){var t;return r.a.createElement("div",{className:"Projects"},r.a.createElement(G.a,{key:null===e||void 0===e?void 0:e._id,defaultActiveKey:"0"},null===e||void 0===e||null===(t=e.projects)||void 0===t?void 0:t.map((function(t){return r.a.createElement(X.a,{key:null===t||void 0===t?void 0:t._id},r.a.createElement(G.a.Toggle,{as:X.a.Header,eventKey:"0"},r.a.createElement("h3",null,r.a.createElement("strong",null,null===t||void 0===t?void 0:t.title),r.a.createElement("h6",null,"By: ",e.firstName," ",e.lastName))),r.a.createElement(G.a.Collapse,{eventKey:"0"},r.a.createElement(X.a.Body,null,r.a.createElement("p",null,null===t||void 0===t?void 0:t.ideasText),r.a.createElement("br",null),r.a.createElement("h4",null,"Donation!"),r.a.createElement(te.a,{"aria-label":"Toolbar with button groups"},r.a.createElement(ee.a,{className:"mr-2","aria-label":"First group"},r.a.createElement(Y.a,{variant:"outline-success"},"$ 10.00")),r.a.createElement(ee.a,{className:"mr-2","aria-label":"Second group"},r.a.createElement(Y.a,{variant:"outline-success"},"$ 20.00")),r.a.createElement(ee.a,{"aria-label":"Third group"},r.a.createElement(Y.a,{variant:"outline-success"},"$ 50.00"))))))}))))}))}var ne=new u.a({request:function(e){var t=localStorage.getItem("id_token");e.setContext({headers:{authorization:t?"Bearer ".concat(t):""}})},uri:"/graphql"});var re=function(){return r.a.createElement(s.a,{client:ne},r.a.createElement(c.a,null,r.a.createElement("div",null,r.a.createElement(z,null),r.a.createElement(i.c,null,r.a.createElement(i.a,{exact:!0,path:"/",component:p}),r.a.createElement(i.a,{exact:!0,path:"/login",component:B}),r.a.createElement(i.a,{exact:!0,path:"/signup",component:q}),r.a.createElement(i.a,{exact:!0,path:"/Dashboard",component:J}),r.a.createElement(i.a,{exact:!0,path:"/MyProject",component:Z}),r.a.createElement("div",null,r.a.createElement("h2",{className:"title"},"Projects"),r.a.createElement(i.a,{exact:!0,path:"/AllProjects",component:ae}))))))},le=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function oe(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(re,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");le?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):oe(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):oe(t,e)}))}}()}},[[63,1,2]]]);
//# sourceMappingURL=main.2dec81d8.chunk.js.map